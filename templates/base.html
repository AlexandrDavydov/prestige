<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Prestige{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    {% block head %}{% endblock %}
</head>
<body>
<a href="{{ url_for('logout') }}">üö™ –í—ã–π—Ç–∏</a>
<div class="container">

    <!-- Flash —Å–æ–æ–±—â–µ–Ω–∏—è -->
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="flash {{ category }}">
        {{ message | safe }}
        <button class="close-btn" onclick="this.parentElement.style.display='none';">&times;</button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    {% block content %}{% endblock %}
</div>
<div id="deleteModal" class="modal">
    <div class="modal-content">
        <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?</p>
        <button onclick="confirmDelete()">–î–∞</button>
        <button onclick="closeDeleteModal()">–ù–µ—Ç</button>
    </div>
</div>
<script>
    // –ê–≤—Ç–æ—Å–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö flash —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
    window.addEventListener('DOMContentLoaded', () => {
        const flashes = document.querySelectorAll('.flash');
        flashes.forEach(flash => {
            setTimeout(() => {
                flash.style.opacity = '0';
                flash.style.maxHeight = '0';
                flash.style.margin = '0';
                setTimeout(() => flash.remove(), 500); // –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
            }, 5000); // 5000 –º—Å = 5 —Å–µ–∫—É–Ω–¥
        });
    });
</script>
<script>
    let deleteUrl = null;

    function openDeleteModal(url) {
        deleteUrl = url;
        document.getElementById("deleteModal").style.display = "flex";
    }

    function closeDeleteModal() {
        document.getElementById("deleteModal").style.display = "none";
    }

    function confirmDelete() {
        window.location.href = deleteUrl;
    }
</script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    document.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            openDeleteModal(this.dataset.url);
        });
    });
});
</script>
</body>
</html>
